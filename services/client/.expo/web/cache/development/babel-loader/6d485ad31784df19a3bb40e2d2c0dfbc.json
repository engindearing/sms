{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { useDispatch } from \"react-redux\";\nimport Redirect from \"../../components/Redirect\";\nimport { axiosWithAuth } from \"../../auth/axiosWithAuth\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function Index() {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var dispatch = useDispatch();\n\n  var getCurrentUser = function getCurrentUser() {\n    var token, userData;\n    return _regeneratorRuntime.async(function getCurrentUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('accessToken'));\n\n          case 2:\n            token = _context.sent;\n            _context.prev = 3;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(axiosWithAuth(token).get('/users/me').then(function (res) {\n              return res.data.user;\n            }));\n\n          case 6:\n            userData = _context.sent;\n            setUser(userData);\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](3);\n            console.log(_context.t0);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 10]], Promise);\n  };\n\n  useEffect(function () {\n    getCurrentUser().then(function (data) {\n      return console.log(data);\n    });\n  }, []);\n  return _jsx(Text, {\n    children: \"Hi\"\n  });\n}\n\nvar RedirectUser = function RedirectUser(_ref) {\n  var user = _ref.user;\n\n  switch (user.role) {\n    case \"staff\":\n      return _jsx(Redirect, {\n        to: \"staff\"\n      });\n\n    case \"guest\":\n      return _jsx(Redirect, {\n        to: user.intake.status === 'completed' ? \"guest\" : 'Intake',\n        params: {\n          userId: user._id\n        }\n      });\n\n    default:\n      return _jsx(Redirect, {\n        to: \"Home\"\n      });\n  }\n};","map":{"version":3,"sources":["/home/isaiah/dev/sms/services/client/screens/HomeScreen/HomeScreen.tsx"],"names":["React","useEffect","useState","useDispatch","Redirect","axiosWithAuth","AsyncStorage","Index","user","setUser","dispatch","getCurrentUser","getItem","token","get","then","res","data","userData","console","log","RedirectUser","role","intake","status","userId","_id"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;AAIA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAOC,QAAP;AACA,SAASC,aAAT;AAEA,OAAOC,YAAP,MAAyB,2CAAzB;;AAEA,eAAe,SAASC,KAAT,GAAiB;AAE9B,kBAAwBL,QAAQ,EAAhC;AAAA;AAAA,MAAOM,IAAP;AAAA,MAAaC,OAAb;;AAEA,MAAMC,QAAQ,GAAGP,WAAW,EAA5B;;AAGA,MAAMQ,cAAc,GAAG,SAAjBA,cAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACDL,YAAY,CAACM,OAAb,CAAqB,aAArB,CADC;;AAAA;AACfC,YAAAA,KADe;AAAA;AAAA;AAAA,6CAIIR,aAAa,CAACQ,KAAD,CAAb,CAAqBC,GAArB,CAAyB,WAAzB,EAAsCC,IAAtC,CAA2C,UAAAC,GAAG;AAAA,qBAAIA,GAAG,CAACC,IAAJ,CAAST,IAAb;AAAA,aAA9C,CAJJ;;AAAA;AAIbU,YAAAA,QAJa;AAMjBT,YAAAA,OAAO,CAACS,QAAD,CAAP;AANiB;AAAA;;AAAA;AAAA;AAAA;AASjBC,YAAAA,OAAO,CAACC,GAAR;;AATiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;;AAaAnB,EAAAA,SAAS,CAAC,YAAM;AACdU,IAAAA,cAAc,GAAGI,IAAjB,CAAsB,UAAAE,IAAI;AAAA,aAAIE,OAAO,CAACC,GAAR,CAAYH,IAAZ,CAAJ;AAAA,KAA1B;AACD,GAFQ,EAEN,EAFM,CAAT;AAIA,SACE,KAAC,IAAD;AAAA;AAAA,IADF;AAID;;AAED,IAAMI,YAAY,GAAG,SAAfA,YAAe,OAAc;AAAA,MAAXb,IAAW,QAAXA,IAAW;;AACjC,UAAQA,IAAI,CAACc,IAAb;AACE,SAAK,OAAL;AACE,aAAO,KAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb,QAAP;;AAEF,SAAK,OAAL;AACE,aAAO,KAAC,QAAD;AAAU,QAAA,EAAE,EAAEd,IAAI,CAACe,MAAL,CAAYC,MAAZ,KAAuB,WAAvB,GAAqC,OAArC,GAA+C,QAA7D;AAAuE,QAAA,MAAM,EAAE;AAAEC,UAAAA,MAAM,EAAEjB,IAAI,CAACkB;AAAf;AAA/E,QAAP;;AAEF;AACE,aAAO,KAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb,QAAP;AARJ;AAUD,CAXD","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { View, Text } from \"react-native\";\n\nimport { useGetCurrentUserQuery } from \"../../auth/users/useGetCurrentUserQuery\";\nimport { useDispatch } from \"react-redux\";\nimport { setCurrentUser } from \"../../state/users/userActions\";\nimport Redirect from \"../../components/Redirect\";\nimport { axiosWithAuth } from \"../../auth/axiosWithAuth\";\n\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nexport default function Index() {\n\n  const [user, setUser] = useState()\n\n  const dispatch = useDispatch();\n\n\n  const getCurrentUser = async () => {\n    const token = await AsyncStorage.getItem('accessToken')\n\n    try {\n        let userData = await axiosWithAuth(token).get('/users/me').then(res => res.data.user)\n\n        setUser(userData)\n\n    } catch (error) {\n        console.log(error)\n    } \n}\n\n  useEffect(() => {\n    getCurrentUser().then(data => console.log(data))\n  }, []);\n\n  return (\n    <Text>Hi</Text>\n    // <RedirectUser user={user} />\n  );\n}\n\nconst RedirectUser = ({ user }) => {\n  switch (user.role) {\n    case \"staff\":\n      return <Redirect to=\"staff\" />;\n\n    case \"guest\":\n      return <Redirect to={user.intake.status === 'completed' ? \"guest\" : 'Intake'} params={{ userId: user._id }}  />;\n\n    default:\n      return <Redirect to=\"Home\" />;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}