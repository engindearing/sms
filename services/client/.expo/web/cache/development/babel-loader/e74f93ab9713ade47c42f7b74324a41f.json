{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _templateObject, _templateObject2, _templateObject3;\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components/native\";\nimport { MaterialCommunityIcons } from \"@expo/vector-icons\";\nimport { Text } from \"native-base\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { axiosWithAuth } from \"../../../../../auth/axiosWithAuth\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar list = [];\n\nvar Index = function Index(_ref) {\n  var shelterId = _ref.shelterId;\n  var navigation = useNavigation();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      reservations = _useState2[0],\n      setReservations = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var getReservations = function getReservations() {\n    var token, res;\n    return _regeneratorRuntime.async(function getReservations$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"accessToken\"));\n\n          case 4:\n            token = _context.sent;\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(axiosWithAuth(token).get(\"/shelters/\" + shelterId + \"/reservations\"));\n\n          case 7:\n            res = _context.sent;\n            setReservations(res.data.reservations);\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](1);\n            alert(\"error!\");\n\n          case 14:\n            _context.prev = 14;\n            setLoading(false);\n            return _context.finish(14);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 11, 14, 17]], Promise);\n  };\n\n  useEffect(function () {\n    getReservations();\n  }, []);\n  useEffect(function () {\n    console.log(reservations);\n  }, [reservations]);\n\n  if (loading) {\n    return _jsx(View, {\n      children: \"Loading\"\n    });\n  }\n\n  return _jsx(View, {\n    children: _jsx(Container, {\n      children: _jsx(Reservations, {\n        children: reservations.map(function (item, i) {\n          var _item$userId, _item$userId2;\n\n          return _jsx(ListItem, {\n            setReservations: setReservations,\n            verified: item.verified,\n            navigation: navigation,\n            id: item._id,\n            hoh: (item == null ? void 0 : (_item$userId = item.userId) == null ? void 0 : _item$userId.firstName) + \" \" + (item == null ? void 0 : (_item$userId2 = item.userId) == null ? void 0 : _item$userId2.lastName),\n            beds: item.beds\n          });\n        })\n      })\n    })\n  });\n};\n\nvar ListItem = function ListItem(_ref2) {\n  var setReservations = _ref2.setReservations,\n      verified = _ref2.verified,\n      hoh = _ref2.hoh,\n      beds = _ref2.beds,\n      navigation = _ref2.navigation,\n      id = _ref2.id;\n\n  var verifyReservation = function verifyReservation() {\n    var token;\n    return _regeneratorRuntime.async(function verifyReservation$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"accessToken\"));\n\n          case 3:\n            token = _context2.sent;\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(axiosWithAuth(token).put(\"/reservations/\" + id, {\n              verified: true\n            }));\n\n          case 6:\n            setReservations(function (prevState) {\n              return prevState.map(function (res) {\n                if (res._id == id) {\n                  res.verified = true;\n                }\n              });\n            });\n            _context2.next = 12;\n            break;\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](0);\n            alert(\"unable to verify bed\");\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  return _jsx(TouchableOpacity, {\n    children: _jsxs(ListItemContainer, {\n      verified: verified,\n      children: [_jsx(Text, {\n        children: hoh + \" / \" + beds + \" beds\"\n      }), _jsx(MaterialCommunityIcons, {\n        onPress: verifyReservation,\n        size: 35,\n        name: \"checkmark\"\n      })]\n    })\n  });\n};\n\nvar ListItemContainer = styled.View(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n  display: flex;\\n\\n  cursor: pointer;\\n\\n  flex-direction: row;\\n\\n  align-items: center;\\n\\n  width: 100%;\\n  border: 1px solid lightgrey;\\n  justify-content: space-between;\\n\\n  background-color: #94ffa2;\\n\\n  \", \"\\n\\n  padding: 1rem;\\n\"])), function (props) {\n  return props.verified !== true && \"background-color: #ff9494\";\n});\nvar Container = styled.View(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"\\n  width: 100%;\\n\\n  display: flex;\\n\\n  justify-content: center;\\n\\n  align-items: center;\\n\"])));\nvar Reservations = styled.View(_templateObject3 || (_templateObject3 = _taggedTemplateLiteralLoose([\"\\n  margin-top: 3rem;\\n\\n  margin-left: 5rem;\\n\\n  width: 40%;\\n\\n  \", \"\\n\\n  \", \"\\n\\n  \", \"\\n\\n  \", \"\\n\"])), function (props) {\n  return props.theme.isLaptop && \"width: 45%;\";\n}, function (props) {\n  return props.theme.isTablet && \"width: 70%;\";\n}, function (props) {\n  return props.theme.isMobileL && \"width: 95%;\";\n}, function (props) {\n  return props.theme.isMobileS && \"width: 98%;\";\n});\nexport default Index;","map":{"version":3,"sources":["/home/isaiah/dev/sms/services/client/screens/ShelterDashboardScreen/components/Screens/Beds/index.jsx"],"names":["React","useEffect","useState","styled","MaterialCommunityIcons","Text","TouchableOpacity","useNavigation","AsyncStorage","axiosWithAuth","list","Index","shelterId","navigation","reservations","setReservations","loading","setLoading","getReservations","getItem","token","get","res","data","alert","console","log","map","item","i","verified","_id","userId","firstName","lastName","beds","ListItem","hoh","id","verifyReservation","put","prevState","ListItemContainer","View","props","Container","Reservations","theme","isLaptop","isTablet","isMobileL","isMobileS"],"mappings":"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","sourcesContent":["import { View } from \"react-native\";\n\nimport React, { useEffect, useState } from \"react\";\n\nimport styled from \"styled-components/native\";\n\nimport { MaterialCommunityIcons } from \"@expo/vector-icons\";\n\nimport { Text } from \"native-base\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { useNavigation } from \"@react-navigation/native\";\n\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nimport { axiosWithAuth } from \"../../../../../auth/axiosWithAuth\";\n\nconst list = [];\n\nconst Index = ({ shelterId }) => {\n  const navigation = useNavigation();\n\n  const [reservations, setReservations] = useState([]);\n\n  const [loading, setLoading] = useState(false);\n\n  const getReservations = async () => {\n    setLoading(true);\n    try {\n      const token = await AsyncStorage.getItem(\"accessToken\");\n\n      let res = await axiosWithAuth(token).get(\n        `/shelters/${shelterId}/reservations`\n      );\n\n      setReservations(res.data.reservations);\n    } catch (error) {\n      alert(\"error!\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getReservations();\n  }, []);\n\n  useEffect(() => {\n    console.log(reservations);\n  }, [reservations]);\n\n  if (loading) {\n    return <View>Loading</View>;\n  }\n\n  return (\n    <View>\n      <Container>\n        <Reservations>\n          {reservations.map((item, i) => (\n            <ListItem\n              setReservations={setReservations}\n              verified={item.verified}\n              navigation={navigation}\n              id={item._id}\n              hoh={item?.userId?.firstName + \" \" + item?.userId?.lastName}\n              beds={item.beds}\n            />\n          ))}\n        </Reservations>\n      </Container>\n    </View>\n  );\n};\n\nconst ListItem = ({ setReservations, verified, hoh, beds, navigation, id }) => {\n  const verifyReservation = async () => {\n    try {\n      const token = await AsyncStorage.getItem(\"accessToken\");\n\n      await axiosWithAuth(token).put(`/reservations/${id}`, {\n        verified: true,\n      });\n\n      \n      setReservations(prevState => prevState.map(res => {\n        if(res._id == id) {\n          res.verified = true\n        }\n\n        \n      }))\n\n\n    } catch (error) {\n      alert(\"unable to verify bed\");\n    }\n  };\n\n  return (\n    <TouchableOpacity>\n      <ListItemContainer verified={verified}>\n        <Text>{hoh + \" / \" + beds + \" beds\"}</Text>\n        <MaterialCommunityIcons\n          onPress={verifyReservation}\n          size={35}\n          name=\"checkmark\"\n        />\n      </ListItemContainer>\n    </TouchableOpacity>\n  );\n};\n\nconst ListItemContainer = styled.View`\n  display: flex;\n\n  cursor: pointer;\n\n  flex-direction: row;\n\n  align-items: center;\n\n  width: 100%;\n  border: 1px solid lightgrey;\n  justify-content: space-between;\n\n  background-color: #94ffa2;\n\n  ${(props) => props.verified !== true && \"background-color: #ff9494\"}\n\n  padding: 1rem;\n`;\n\nconst Container = styled.View`\n  width: 100%;\n\n  display: flex;\n\n  justify-content: center;\n\n  align-items: center;\n`;\n\nconst Reservations = styled.View`\n  margin-top: 3rem;\n\n  margin-left: 5rem;\n\n  width: 40%;\n\n  ${(props) => props.theme.isLaptop && \"width: 45%;\"}\n\n  ${(props) => props.theme.isTablet && \"width: 70%;\"}\n\n  ${(props) => props.theme.isMobileL && \"width: 95%;\"}\n\n  ${(props) => props.theme.isMobileS && \"width: 98%;\"}\n`;\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}